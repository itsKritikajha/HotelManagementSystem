import java.io.*;
import java.util.*;

class Details {
    private String name;
    private String phoneNumber;

    public Details(String name, String phoneNumber) {
        this.name = name;
        this.phoneNumber = phoneNumber;
    }

    public void displayDetails() {
        System.out.println("-----Customer Details------");
        System.out.println("Name: " + name);
        System.out.println("Phone Number: " + phoneNumber);
        System.out.println();
    }
}

class Room {
    static final int TOTAL_ROOMS = 100;
    static int availableRooms = TOTAL_ROOMS;
    static final double PRICE = 1500.0;
    static Set<Integer> bookedRoomNumbers = new HashSet<>();

    public static int generateUniqueRoomNumber() {
        Random r = new Random();
        int number;
        do {
            number = r.nextInt(TOTAL_ROOMS) + 1;
        } while (bookedRoomNumbers.contains(number));
        bookedRoomNumbers.add(number);
        return number;
    }
}

class BookingRoom {
    public void bookRooms(Scanner sc) {
        System.out.println("-----Booking Room-----");

        try {
            System.out.println("Enter number of rooms to book:");
            int numberOfRooms = Integer.parseInt(sc.nextLine());

            if (numberOfRooms <= 0) {
                System.out.println("Invalid number of rooms. Please enter a positive value.");
                return;
            }

            if (numberOfRooms > Room.availableRooms) {
                System.out.println("Sorry, only " + Room.availableRooms + " rooms are available.");
                return;
            }

            Room.availableRooms -= numberOfRooms;
            System.out.println("Booking Successful!");
            System.out.println("Rooms Booked: " + numberOfRooms);
            double totalPrice = Room.PRICE * numberOfRooms;
            System.out.println("Total Price: Rs. " + totalPrice);
            System.out.println("Allocated Room Numbers:");

            FileWriter fw = new FileWriter("bookings.txt", true);
            BufferedWriter bw = new BufferedWriter(fw);

            for (int i = 0; i < numberOfRooms; i++) {
                int roomNumber = Room.generateUniqueRoomNumber();
                System.out.println("Room Number: " + roomNumber);
                bw.write("Room Number: " + roomNumber + "\n");
            }
            bw.close();

            System.out.println("Rooms left: " + Room.availableRooms);
        } catch (NumberFormatException e) {
            System.out.println("Error: Please enter a valid number.");
        } catch (IOException e) {
            System.out.println("Error saving booking information.");
        }
    }
}

public class HotelManagement {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        System.out.println("-----Welcome to Hotel Management System-----\n");

        System.out.print("Enter your name: ");
        String name = sc.nextLine();

        System.out.print("Enter your phone number: ");
        String phoneNumber = sc.nextLine();

        Details customer = new Details(name, phoneNumber);
        customer.displayDetails();

        System.out.println("-----Room Information-----");
        System.out.println("Total Rooms: " + Room.TOTAL_ROOMS);
        System.out.println("Available Rooms: " + Room.availableRooms);
        System.out.println("Room Price: Rs. " + Room.PRICE);
        System.out.println();

        BookingRoom book = new BookingRoom();

        String choice;
        do {
            book.bookRooms(sc);
            System.out.print("Do you want to book more rooms? (yes/no): ");
            choice = sc.nextLine();
        } while (choice.equalsIgnoreCase("yes"));

        System.out.println("\nThank you for using our service. Have a great day!");
        sc.close();
    }
}
